## 返回栈

Android 中的活动是可以层叠的。我们每启动一个新的活动，就会覆盖在原活动之上，然后点击 Back键 会销毁最上面的活动，下面的一个活动就会重新显示出来。

其实 Android 是使用任务（Task）来管理活动的，一个任务就是一组存放在`栈`里的活动的集合，这个栈也被称作`返回栈（Back Stack）`。栈是一种后进先出的数据结构，在默认情况下，每当我们启动了一个新的活动，它会在返回栈中入栈，并处于栈顶的位置。而每当我们按下 Back键 或调用 `finish()` 方法去销毁一个活动时，处于栈顶的活动会出栈，这时前一个入栈的活动就会重新处于栈顶的位置。系统总是会显示处于栈顶的活动给用户。



## 活动状态

每个活动在其生命周期中最多可能会有 **4 种**状态。

1. 运行状态
2. 暂停状态
3. 停止状态
4. 销毁状态

关于上面的 4 个状态。在 Activity 类中定义的 7 个回调方法，覆盖了生命周期的每一个环节。

1. `onCreate()` 在这里完成活动的初始化操作。
2. `onStart()` 在活动由不可见变为可见的时候调用。
3. `onResume()` 在活动准备好和用户交互的时候调用。此时的活动一定处于返回栈的栈顶，且处于活动状态。
4. `onPause()` 系统准备去启动或恢复另一个活动的时候调用。
5. `onStop()` 在活动完全不可用的时候调用。
6. `onDestroy()` 这个方法在活动被销毁之前调用，之后活动的状态将变为销毁状态。
7. `onRestart()` 这个方法在活动由停止状态变为运行状态之前调用，也就是活动被重新启动了。

![image-20201130142511526](C:\Users\viruser.v-desktop\AppData\Roaming\Typora\typora-user-images\image-20201130142511526.png)



### 三种生存期

